# CRM-YII1-MySQL
Задача:
Есть:
детальная таблица "Сделки" (Номер сделки, Покупатель, Поставщик, Дата (день), Товар, Стоимость, Профит, Стоимость достаки, ...). 
- Как правило, каждая сделка предполагает закупку нескольких наименований Товара данного Поставщика. 
- Покупатели могут делать закупки у данного Поставщика (и даже Страны) не каждый месяц.
справочные таблицы "Покупатели" (Покупатель, Город, Менеджер), "Поставщики" (Поставщик, Страна).
Требуется: 
контролировать Лояльность Клиента и оперативно оповещать о потенциальных проблемах его Менеджера. 
Предположение:
специфика бизнес области предполагает, что Клиент делает закупки (у любого из Постащиков) не реже чем 1 раз в 15 дней.
Решение: 
Анализировать агрегированные данные о Покупках (у любого из Поставщиков) Клиента и в случае:
- нет покупок более 15 дней присваивать ему статус "нет покупок более 15 дней" и оповещать об этом его Менеджера.
- нет покупок более 30 дней присваивать ему статус "нет покупок более 30 дней" и оповещать об этом Менеджера.
Менеджер имеет возможность из CRM экрана перейти в экран работы с описанием Клиента и внести в дневник работы с Клиентом описание предполагемых действий по выяснению причин сложившейся ситуации.
Если покупок нет более 30 дней, приходит сообщение Менеджеру более высокого уровня и тот имеет возможность проанализировать историю покупок данного Клиента и историю взаимодействия с ним Менеджера, отражаемую в дневнике работы с Клиентом. 
